{% extends 'layout.html' %}

{% block title %}{% endblock %}


{% block content %}
<script src="/socket.io/socket.io.js"></script>
<link rel="stylesheet" href="/css/student-ui.css">
<script type="text/javascript" src="/js/ng-chatroom.js"></script>
<script type="text/javascript" src="/js/service/chatroom.js"></script>
<link rel="stylesheet" href="https://code.getmdl.io/1.1.1/material.teal-purple.min.css" />
<style>
.md-errors-spacer {
  display: none;
}


</style>
<div>
  <div ng-app="ipkms" ng-controller="chatroomController">
    <!-- The drawer is always open in large screens. The header is always shown,
    even in small screens. -->
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer
    mdl-layout--fixed-header">
    <header class="mdl-layout__header">
      <div class="mdl-layout__header-row">
        <span class="mdl-layout-title">小組聊天室</span>
        <div class="mdl-layout-spacer">
        </div>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable
        mdl-textfield--floating-label mdl-textfield--align-right">
        <!-- <label class="mdl-button mdl-js-button mdl-button--icon"
        for="fixed-header-drawer-exp">
        <i class="material-icons">search</i>
      </label> -->
      <div class="mdl-textfield__expandable-holder">
        <input class="mdl-textfield__input" type="text" name="sample"
        id="fixed-header-drawer-exp">
      </div>
    </div>
  </div>
</header>
<div class="mdl-layout__drawer" ng-cloak>
  <span class="mdl-layout-title">{{user.local.name}}</span>
  <nav class="mdl-navigation">
    <a class="mdl-navigation__link" ng-repeat="group in myGroups" ng-click="selectRooom(group.group._id)">{[{group.group.name}]}</a>
  </nav>
</div>

<main id="messageBox" class="mdl-layout__content" style="background-color:#E9E2DC;padding:0 30px;margin-bottom:60px">
<div style="margin-bottom:80px">
  <div ng-repeat="msg in messages[roomId]" ng-class="{'tail-selfmsg': selfMessage(msg.userid)}" ng-cloak>
    <div ng-class="{'message-in': !selfMessage(msg.userid), 'message-out':selfMessage(msg.userid)}">
      <a>{[{msg.username}]}</a>
      <p style="margin:0">{[{msg.contents}]}</p>
    </div>
  </div>
</div>

  <div class="message-inputs" layout="row">

    <div style="margin:0 20px;flex:1 1 auto">
      <input ng-model="msg.content" style="width: 100%;height: 20px;border: none;padding: 10px;margin-top: 10px;border-radius:5px" placeholder="輸入信息" ng-keypress="listenForEnter($event)"/>
    </div>
    <md-button ng-click="sendMessage()" class="md-icon-button" style="margin:10px 20px">
      <i class="material-icons" style="color:#9E9E9E">send</i>
    </md-button>
  </div>
</main>
</div>


</div>
</div>

{% endblock %}
