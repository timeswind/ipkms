<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.js"></script>

<md-dialog aria-label="建立新功課" class='homework-dialog'>
  <form name="newhomeworkForm">
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2>建立新功課</h2>
        <i class="material-icons" style="margin-left:5px;color:#3E2723" ng-style="newhomework.title && {'color':'#fff'}">check_circle</i>
        <i class="material-icons" style="margin-left:5px;color:#3E2723" ng-style="newhomework.requirement && {'color':'#fff'}">check_circle</i>
        <i class="material-icons" style="margin-left:5px;color:#3E2723" ng-style="newhomework.subject && {'color':'#fff'}">check_circle</i>
        <span flex></span>
        <md-button class="md-icon-button" ng-click="cancel()">
          <i class="material-icons">close</i>
        </md-button>
      </div>
    </md-toolbar>
    <md-dialog-content>
      <div class="md-dialog-content" style="padding-top:10px;">
        <p class="cos-input-title" style="margin-top:15px">功課標題（必填）</p>
        <md-input-container md-no-float class="md-block">
          <input name="title" style="border-color:#795548;font-size:18px" ng-model="newhomework.title" placeholder="功課標題（必填）" required>
        </md-input-container>

        <p class="cos-input-title">詳細要求</p>

        <textarea ui-tinymce="tinymceOptions" ng-model="newhomework.requirement"></textarea>

        <div layout="row" layout-sm="column" layout-xs="column">
          <div flex="50" flex-sm="100" flex-xs="100">
            <p class="cos-input-title" style="margin-top:25px">所屬科目（必填）</p>
            <md-input-container class="md-block">
              <md-select placeholder="所屬科目（必填）" ng-model="newhomework.subject" required>
                <md-option style="border-color:#795548" ng-repeat="subject in subjects" value="{[{subject.id}]}">
                  {[{subject.name}]}
                </md-option>
              </md-select>
            </md-input-container>
          </div>
          <div flex="50" flex-sm="100" flex-xs="100">
            <p class="cos-input-title" style="margin-top:25px">標籤（推薦，便於日後歸類查詢）</p>
            <md-chips
            ng-model="newhomework.tags"
            placeholder="輸入多個標籤"
            secondary-placeholder="+關鍵字"></md-chips>
            <br/>
          </div>

        </div>

        <div style="border: 1px dashed #795548;padding: 16px 0 0 10px;margin:40px 0">
          <md-radio-group ng-model="newhomework.delivery" required>
            <md-radio-button value="false" class="md-primary">先將該功課保存，在將來分發給小組或同學</md-radio-button>
            <md-radio-button value="true">現在就將功課分發給指定小組或同學</md-radio-button>
          </md-radio-group>
        </div>

        <div ng-show="newhomework.delivery == 'true'">
          <div layout="row" layout-sm="column" layout-xs="column">
            <div flex="50" flex-sm="100" flex-xs="100">
              <p class="cos-input-title" style="margin-top:15px">目標小組</p>
              <md-select placeholder="選擇小組或者班級" ng-model="newhomework.targetGroup" md-on-open="loadMyGroups()">
                <md-optgroup label="我的小組">
                  <md-option value="{[{group.id}]}" ng-repeat="group in groupsClasses | filter: {category: 'group' }">
                    {[{group.name}]}
                  </md-option>
                </md-optgroup>
                <!-- <md-optgroup label="班級">
                <md-option ng-value="class.name" ng-repeat="class in groupsClasses | filter: {category: 'class' }">{[{class.name}]}</md-option>
              </md-optgroup> -->
            </md-select>
          </div>
          <div flex="50" flex-sm="100" flex-xs="100">
            <p class="cos-input-title" style="margin-top:15px">上交日期</p>
            <md-datepicker  ng-model="newhomework.deadline" md-placeholder="選擇上交日期">
            </md-datepicker>
          </div>

        </div>

      </div>
    </md-dialog-content>
    <md-dialog-actions layout="row">
      <md-button class="md-raised" style="margin-right:20px;background-color:#795548;color:#fff" ng-click="createHomework()" ng-disabled="newhomeworkForm.$invalid">建立</md-button>
    </md-dialog-actions>
  </form>
</md-dialog>
